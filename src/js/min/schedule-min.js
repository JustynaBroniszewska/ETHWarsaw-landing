const body=document.querySelector("body"),scheduleDaysList=body.querySelector(".schedule__days-list"),scheduleTables=body.querySelector(".schedule__tables"),renderDayButton=(e,t)=>{const a=document.createElement("button");a.classList.add("schedule__day"),t<1&&a.classList.add("schedule__day--active"),a.dataset.scheduleDate=e.date,a.innerHTML=e.date,scheduleDaysList.appendChild(a)},renderTab=(e,t,a)=>{const s=document.createElement("button");s.classList.add("schedule__table-tab"),!0===a&&s.classList.add("schedule__table-tab--active"),s.dataset.scheduleStage=t,s.innerHTML=t,e.appendChild(s)},renderEvent=(e,t)=>{const a=document.createElement("div");a.classList.add("schedule__table-event");const s=document.createElement("button");s.classList.add("schedule__table-event-button");const l=document.createElement("div");l.classList.add("schedule__table-event-body"),t.speakers||t.description||s.classList.add("schedule__table-event-button--disabled");s.innerHTML=`\n    ${(()=>t.time?`<span class="schedule__table-event-time">${t.time}</span>`:"")()}\n    ${(()=>t.title?`<span class="schedule__table-event-title">${t.title}</span>`:"")()}\n    ${(()=>t.speakers||t.description?'<svg class="schedule__table-event-arrow" viewBox="0 0 448 512" fill="none" color="currentColor"><path d="M224 416c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L224 338.8l169.4-169.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-192 192C240.4 412.9 232.2 416 224 416z" fill="currentColor"/></svg>':"")()}\n  `,l.innerHTML=`\n    ${(()=>t.speakers?`\n        <div class="schedule__table-event-speakers">\n          ${t.speakers.map((e,t)=>`<div class="schedule__table-event-speaker"><img class="schedule__table-event-speaker-image" src="${e.image?e.image:"/scheduleData/images/speaker_placeholder.svg"}" loading="lazy" decoding="async"/><span class="schedule__table-event-speaker-name">${e.name}</span></div>`).join("")}\n        </div>\n      `:"")()}\n    ${(()=>t.description?`<p class="schedule__table-event-description">${t.description}</p>`:"")()}\n  `,a.appendChild(s),(t.speakers||t.description)&&a.appendChild(l),e.appendChild(a)},renderStage=(e,t,a,s)=>{const l=document.createElement("div");l.classList.add("schedule__table-stage"),!0===s&&l.classList.add("schedule__table-stage--active"),l.dataset.scheduleStage=a;const d=document.createElement("p");d.classList.add("schedule__table-stage-title"),d.innerHTML="schedule will be updated soon",l.appendChild(d);const c=document.createElement("div");c.classList.add("schedule__table-stage-events"),e.events.forEach(e=>renderEvent(c,e)),l.appendChild(c),t.appendChild(l)},renderDayTable=(e,t)=>{const a=document.createElement("div");a.classList.add("schedule__table"),t<1&&a.classList.add("schedule__table--active"),a.dataset.scheduleDate=e.date;const s=document.createElement("div");s.classList.add("schedule__table-tabs"),a.appendChild(s);const l=document.createElement("div");l.classList.add("schedule__table-stages"),a.appendChild(l),e.mainStage&&(renderTab(s,"Main stage",!0),renderStage(e.mainStage,l,"Main stage",!0)),e.workshopStage&&(renderTab(s,"Workshop stage",!1),renderStage(e.workshopStage,l,"Workshop stage",!1)),scheduleTables.appendChild(a)},handleEventToggle=e=>{e.parentNode.classList.toggle("schedule__table-event--active")},handleTabsToggle=(e,t)=>{t.querySelectorAll(".schedule__table-tab").forEach(e=>e.classList.remove("schedule__table-tab--active")),e.classList.add("schedule__table-tab--active"),t.querySelectorAll(".schedule__table-stage").forEach(e=>e.classList.remove("schedule__table-stage--active")),t.querySelector(`.schedule__table-stage[data-schedule-stage="${e.dataset.scheduleStage}"]`).classList.add("schedule__table-stage--active")},handleScheduleClicks=(e,t)=>{e.target.classList.contains("schedule__table-tab")&&handleTabsToggle(e.target,t),e.target.classList.contains("schedule__table-event-button")&&handleEventToggle(e.target)},handleDayClicks=e=>{const t=e.target;if(t.classList.contains("schedule__day")){const e=body.querySelectorAll(".schedule__day"),a=body.querySelectorAll(".schedule__table");e.forEach(e=>e.classList.remove("schedule__day--active")),t.classList.add("schedule__day--active"),a.forEach(e=>e.classList.remove("schedule__table--active")),body.querySelector(`.schedule__table[data-schedule-date="${t.dataset.scheduleDate}"]`).classList.add("schedule__table--active")}},handleScheduleFetch=()=>{const e=body.querySelector(".schedule__days"),t=document.createElement("span");t.classList.add("schedule__days-loader"),t.innerHTML="We're trying to load the ETHWarsaw schedule...",e.querySelector(".schedule__wrapper").appendChild(t),fetch("/documents/schedule.json").then(e=>{if(e.ok)return e;throw Promise.reject("Failed to load data for ETHWarsaw schedule."),new Error("Failed to load data for ETHWarsaw schedule")}).then(e=>e.json()).then(a=>(e.querySelector(".schedule__wrapper").removeChild(t),a.scheduleData.forEach((e,t)=>{renderDayButton(e,t),renderDayTable(e,t)}))).then(()=>{e.addEventListener("click",e=>handleDayClicks(e)),body.querySelectorAll(".schedule__table").forEach(e=>e.addEventListener("click",t=>handleScheduleClicks(t,e)))}).catch(e=>{throw t.innerHTML="We tried to download the ETHWarsaw schedule, but something went wrong...",new Error(e)})};handleScheduleFetch();